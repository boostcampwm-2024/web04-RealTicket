import { Injectable } from '@nestjs/common';
import { interval, Observable } from 'rxjs';
import { map } from 'rxjs/operators';

@Injectable()
export class ReservationService {
  getReservations() {
    return [
      {
        id: 1,
        createdAt: new Date(),
        deletedAt: null,
        amount: 2,
        seats: [
          [1, 1],
          [1, 2],
        ],
        programId: 1,
        eventId: 1,
        userId: 1,
      },
      {
        id: 2,
        createdAt: new Date(),
        deletedAt: null,
        amount: 1,
        seats: [[2, 1]],
        programId: 1,
        eventId: 1,
        userId: 1,
      },
    ];
  }

  getReservationStatusByEventId(eventId: number): Observable<any> {
    return interval(1000).pipe(
      map((num) => {
        switch (num % 5) {
          case 0:
            return {
              id: eventId,
              data: {
                'seat-status': [
                  [
                    false,
                    false,
                    true,
                    true,
                    true,
                    true,
                    true,
                    true,
                    true,
                    true,
                    true,
                    true,
                    true,
                    true,
                    true,
                    true,
                    true,
                    true,
                    true,
                    true,
                  ],
                  [
                    false,
                    true,
                    false,
                    true,
                    true,
                    true,
                    true,
                    false,
                    true,
                    true,
                    true,
                    true,
                    false,
                    true,
                    true,
                    true,
                    true,
                    false,
                    true,
                    true,
                  ],
                ],
              },
            };
          case 1:
            return {
              id: eventId,
              data: {
                'seat-status': [
                  [
                    false,
                    false,
                    true,
                    true,
                    false,
                    false,
                    false,
                    true,
                    true,
                    true,
                    true,
                    true,
                    true,
                    true,
                    true,
                    true,
                    true,
                    true,
                    true,
                    true,
                  ],
                  [
                    false,
                    true,
                    false,
                    true,
                    true,
                    true,
                    true,
                    false,
                    true,
                    false,
                    false,
                    true,
                    false,
                    true,
                    true,
                    true,
                    true,
                    false,
                    true,
                    true,
                  ],
                ],
              },
            };
          case 2:
            return {
              id: eventId,
              data: {
                'seat-status': [
                  [
                    false,
                    false,
                    true,
                    true,
                    false,
                    false,
                    true,
                    true,
                    true,
                    true,
                    false,
                    true,
                    true,
                    true,
                    true,
                    true,
                    true,
                    true,
                    true,
                    true,
                  ],
                  [
                    false,
                    true,
                    false,
                    true,
                    true,
                    true,
                    true,
                    false,
                    true,
                    false,
                    false,
                    true,
                    false,
                    true,
                    false,
                    true,
                    true,
                    false,
                    true,
                    true,
                  ],
                ],
              },
            };
          case 3:
            return {
              id: eventId,
              data: {
                'seat-status': [
                  [
                    false,
                    false,
                    true,
                    true,
                    false,
                    false,
                    false,
                    true,
                    false,
                    true,
                    false,
                    true,
                    true,
                    true,
                    true,
                    false,
                    false,
                    true,
                    true,
                    true,
                  ],
                  [
                    false,
                    true,
                    false,
                    true,
                    true,
                    true,
                    true,
                    false,
                    true,
                    false,
                    false,
                    true,
                    false,
                    true,
                    false,
                    true,
                    true,
                    false,
                    false,
                    true,
                  ],
                ],
              },
            };
          case 4:
            return {
              id: eventId,
              data: {
                'seat-status': [
                  [
                    false,
                    false,
                    false,
                    false,
                    false,
                    false,
                    false,
                    true,
                    false,
                    true,
                    false,
                    true,
                    true,
                    true,
                    true,
                    false,
                    false,
                    true,
                    true,
                    true,
                  ],
                  [
                    false,
                    false,
                    false,
                    true,
                    true,
                    true,
                    true,
                    false,
                    true,
                    false,
                    false,
                    true,
                    false,
                    true,
                    true,
                    true,
                    true,
                    false,
                    false,
                    true,
                  ],
                ],
              },
            };
        }
      }),
    );
  }
}
